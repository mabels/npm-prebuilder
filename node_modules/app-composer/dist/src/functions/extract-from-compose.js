"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const extractor_1 = require("./extractor");
const files_to_names_1 = require("./files-to-names");
const path = require("path");
// tslint:disable-next-line: no-var-requires no-require-imports
const globby = require('globby');
function extractFromCompose(basePath, composePath, prevPkgs) {
    return new Promise((rs, rj) => {
        const globCompose = `${composePath}/**/*`;
        // console.log(`yarnAddOrExtract:${globCompose}`);
        globby([globCompose]).then((files) => {
            // console.log(`yarnAddOrExtract:${globCompose}:${files}`);
            const names = files_to_names_1.filesToNames(files.sort());
            const extractedPath = path.join(composePath, '..', 'node_modules');
            extractor_1.extractor(extractedPath, Array.from(names.values())).then((nss) => {
                rs(nss);
            });
        });
    });
}
exports.extractFromCompose = extractFromCompose;
//# sourceMappingURL=extract-from-compose.js.map