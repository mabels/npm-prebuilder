"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const path = require("path");
const fs = require("fs");
const constFileName = 'app-composer.config';
function findConfig(basePath) {
    if (basePath == '/' || basePath == '.') {
        return null;
    }
    const filePath = path.join(basePath, constFileName);
    if (fs.existsSync(filePath) && fs.statSync(filePath).isFile()) {
        return filePath;
    }
    return findConfig(path.dirname(basePath));
}
function loadInvokationArgs(identifier) {
    try {
        return require(identifier);
    }
    catch (e) {
        throw Error('unable to load invokation args');
    }
}
function loadConfig(basePath) {
    const configPath = findConfig(basePath);
    if (!configPath) {
        throw Error('loadConfig: unable to find app composer config.');
    }
    const config = JSON.parse(fs.readFileSync(configPath).toString());
    return {
        invokationArgs: loadInvokationArgs(config['invokation-args'])
    };
}
exports.loadConfig = loadConfig;
//# sourceMappingURL=config-loader.js.map