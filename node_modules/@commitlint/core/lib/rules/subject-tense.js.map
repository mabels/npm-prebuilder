{"version":3,"sources":["../../src/rules/subject-tense.js"],"names":["parsed","when","value","tenses","Array","isArray","allowed","ignoreConfig","ignored","negated","notes","map","note","title","subject","matches","offending","offenders","item","lemma","tense","join"],"mappings":";;;;;;;;;;AAAA;;;;AACA;;;;;;kBAEe,UAACA,MAAD,EAASC,IAAT,EAAeC,KAAf,EAAyB;AACvC,KAAMC,SAASC,MAAMC,OAAN,CAAcH,KAAd,IAAuBA,KAAvB,GAA+BA,MAAMI,OAAN,IAAiB,EAA/D;AACA,KAAMC,eAAeH,MAAMC,OAAN,CAAcH,KAAd,IAAuB,EAAvB,GAA4BA,MAAMM,OAAN,IAAiB,EAAlE;;AAEA,KAAMC,UAAUR,SAAS,OAAzB;AACA,KAAMO,qDAAcD,YAAd,oCAA+BP,OAAOU,KAAP,CAAaC,GAAb,CAAiB;AAAA,SAAQC,KAAKC,KAAb;AAAA,EAAjB,CAA/B,EAAN;;AALuC,oBAMV,2BAAYb,OAAOc,OAAnB,EAA4BX,MAA5B,EAAoC;AAChEK;AADgE,EAApC,CANU;AAAA,KAMhCO,OANgC,gBAMhCA,OANgC;AAAA,KAMvBC,SANuB,gBAMvBA,SANuB;;AASvC,KAAMC,YAAYD,UAChBL,GADgB,CACZ;AAAA,SAAQ,CAACO,KAAKC,KAAN,EAAaD,KAAKE,KAAlB,EAAyBC,IAAzB,CAA8B,KAA9B,CAAR;AAAA,EADY,EAEhBA,IAFgB,CAEX,GAFW,CAAlB;;AAIA,QAAO,CACNZ,UAAU,CAACM,OAAX,GAAqBA,OADf,EAEN,uBAAQ,CACN,uBADM,EAEPN,UAAW,KAAX,GAAkB,IAFX,EAGN,MAAKP,KAAM,4BAA2Be,SAAU,EAH1C,CAAR,CAFM,CAAP;AAQA,C","file":"subject-tense.js","sourcesContent":["import ensureTense from '../library/ensure-tense';\nimport message from '../library/message';\n\nexport default (parsed, when, value) => {\n\tconst tenses = Array.isArray(value) ? value : value.allowed || [];\n\tconst ignoreConfig = Array.isArray(value) ? [] : value.ignored || [];\n\n\tconst negated = when === 'never';\n\tconst ignored = [...ignoreConfig, ...parsed.notes.map(note => note.title)];\n\tconst {matches, offending} = ensureTense(parsed.subject, tenses, {\n\t\tignored\n\t});\n\tconst offenders = offending\n\t\t.map(item => [item.lemma, item.tense].join(' - '))\n\t\t.join(',');\n\n\treturn [\n\t\tnegated ? !matches : matches,\n\t\tmessage([\n\t\t\t`tense of subject must`,\n\t\t\tnegated ? `not` : null,\n\t\t\t`be ${value}. Verbs in other tenses: ${offenders}`\n\t\t])\n\t];\n};\n"]}