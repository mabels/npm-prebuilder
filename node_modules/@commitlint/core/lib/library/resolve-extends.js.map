{"version":3,"sources":["../../src/library/resolve-extends.js"],"names":["resolveExtends","config","context","e","extends","extended","loadExtends","reduceRight","r","c","console","warn","reduce","configs","raw","load","require","resolved","resolveConfig","ctx","cwd","dirname","getId","prefix","first","charAt","scoped","relative","filter","String","join","resolve","resolveId","id","err","legacy","process"],"mappings":"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","file":"resolve-extends.js","sourcesContent":["import path from 'path';\nimport from from 'resolve-from';\nimport {merge, omit} from 'lodash';\n\n// Resolve extend configs\nexport default function resolveExtends(config = {}, context = {}) {\n\tconst {extends: e} = config;\n\tconst extended = loadExtends(config, context).reduceRight(\n\t\t(r, c) => merge(r, omit(c, 'extends')),\n\t\te ? {extends: e} : {}\n\t);\n\n\t// Remove deprecation warning in version 3\n\tif (typeof config === 'object' && 'wildcards' in config) {\n\t\tconsole.warn(\n\t\t\t`'wildcards' found in top-level configuration ignored. Remove them from your config to silence this warning.`\n\t\t);\n\t}\n\n\treturn merge({}, extended, config);\n}\n\n// (any, string, string, Function) => any[];\nfunction loadExtends(config = {}, context = {}) {\n\treturn (config.extends || []).reduce((configs, raw) => {\n\t\tconst load = context.require || require;\n\t\tconst resolved = resolveConfig(raw, context);\n\t\tconst c = load(resolved);\n\n\t\t// Remove deprecation warning in version 3\n\t\tif (typeof c === 'object' && 'wildcards' in c) {\n\t\t\tconsole.warn(\n\t\t\t\t`'wildcards' found in '${raw}' ignored. To silence this warning raise an issue at 'npm repo ${raw}' to remove the wildcards.`\n\t\t\t);\n\t\t}\n\n\t\tconst ctx = merge({}, context, {\n\t\t\tcwd: path.dirname(resolved)\n\t\t});\n\n\t\treturn [...configs, c, ...loadExtends(c, ctx)];\n\t}, []);\n}\n\nfunction getId(raw = '', prefix = '') {\n\tconst first = raw.charAt(0);\n\tconst scoped = first === '@';\n\tconst relative = first === '.';\n\treturn scoped || relative ? raw : [prefix, raw].filter(String).join('-');\n}\n\nfunction resolveConfig(raw, context = {}) {\n\tconst resolve = context.resolve || resolveId;\n\tconst id = getId(raw, context.prefix);\n\n\ttry {\n\t\treturn resolve(id, context);\n\t} catch (err) {\n\t\tconst legacy = getId(raw, 'conventional-changelog-lint-config');\n\t\tconst resolved = resolve(legacy, context);\n\t\tconsole.warn(\n\t\t\t`Resolving ${raw} to legacy config ${legacy}. To silence this warning raise an issue at 'npm repo ${legacy}' to rename to ${id}.`\n\t\t);\n\t\treturn resolved;\n\t}\n}\n\nfunction resolveId(id, context = {}) {\n\treturn from(context.cwd || process.cwd(), id);\n}\n"]}