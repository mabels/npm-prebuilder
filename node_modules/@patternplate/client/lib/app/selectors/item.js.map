{"version":3,"sources":["../../../src/app/selectors/item.js"],"names":["selectVirtual","docs","filter","d","manifest","options","query","Boolean","selectItem","state","id","pool","item","find","contentType","hidden","i","selectFilter","hide","relation","key","selectDependencies","selectDependents","selectManifest","JSON","stringify","selectContentType","selectType","type","selectActive","searchEnabled","search","selectIcon","icon","selectName","displayName","selectTags","tags","selectVersion","version","selectFlag","flag","selectId","selectContents","contents","selectDescription","description"],"mappings":"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","file":"item.js","sourcesContent":["import { createSelector } from \"reselect\";\nimport { flat as selectDocs } from \"./docs\";\nimport { flat as selectPool } from \"./pool\";\nimport createRelationSelector from \"./relation\";\n\nconst selectVirtual = createSelector(\n  selectDocs,\n  docs => {\n    return docs.filter(d => {\n      const {manifest} = d;\n      const {options = {}} = manifest;\n      const {query = \"\"} = options;\n      return Boolean(query);\n    });\n  }\n);\n\nconst selectItem = createSelector(\n  selectPool,\n  state => state.id,\n  (pool, id) => {\n    const item = pool.find(item => id === `${item.contentType}/${item.id}`);\n\n    if (item) {\n      return item;\n    }\n\n    if (id === '/') {\n      return pool[0];\n    }\n  }\n);\n\nexport default selectItem;\n\nconst filter = hidden => {\n  return hidden\n    ? item => (item.manifest.options || {}).hidden !== true\n    : i => i;\n};\n\nconst selectFilter = createSelector(state => state.hide, hide => filter(hide));\n\nconst relation = key => createRelationSelector(key, selectItem, selectFilter);\n\nexport const selectDependencies = relation(\"dependencies\");\nexport const selectDependents = relation(\"dependents\");\n\nexport const selectManifest = createSelector(\n  selectItem,\n  item => (item ? JSON.stringify(item.manifest, null, \"  \") : \"\")\n);\n\nexport const selectContentType = createSelector(\n  selectItem,\n  item => (item ? item.contentType : \"\")\n);\n\nexport const selectType = createSelector(\n  selectItem,\n  item => (item ? item.type : \"\")\n);\n\nexport const selectActive = createSelector(\n  selectItem,\n  state => state.searchEnabled,\n  (item, search) => !search && item !== null && typeof item !== \"undefined\"\n);\n\nexport const selectIcon = createSelector(\n  selectItem,\n  item => (item ? item.manifest.icon || item.type : \"\")\n);\n\nexport const selectName = createSelector(\n  selectItem,\n  item => (item ? item.manifest.displayName : \"\")\n);\n\nexport const selectTags = createSelector(\n  selectItem,\n  item => (item ? item.manifest.tags || [] : [])\n);\n\nexport const selectVersion = createSelector(\n  selectItem,\n  item => (item ? item.manifest.version : \"\")\n);\n\nexport const selectFlag = createSelector(\n  selectItem,\n  item => (item ? item.manifest.flag : \"\")\n);\n\nexport const selectId = createSelector(\n  selectItem,\n  item => (item ? item.id : \"\")\n);\n\nexport const selectContents = createSelector(selectItem, item => {\n  if (!item) {\n    return null;\n  }\n  return typeof item.contents === \"string\" ? item.contents : null;\n});\n\nexport const selectDescription = createSelector(\n  selectItem,\n  item => (item ? item.manifest.description : \"\")\n);\n"]}