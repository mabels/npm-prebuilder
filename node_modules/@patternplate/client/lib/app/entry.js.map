{"version":3,"sources":["../../src/app/entry.js"],"names":["getRoutes","base","router","path","data","Promise","resolve","eventEmitter","run","Handler","state","appData","renderToString","client","el","global","location","pathname","HistoryLocation","render"],"mappings":";;;;;;;;AAAA;;AAEA;;AACA;;AACA;;AACA;;AACA;;AAEA;;AACA;;AACA;;;;;;;;AAEA,SAASA,SAAT,CAAmBC,OAAO,GAA1B,EAA+B;AAC7B,SACE;AAAO,UAAK,MAAZ;AAAmB,UAAMA,IAAzB;AAA+B;AAA/B,KACE,6BAAC,YAAD;AAAc;AAAd,IADF,EAEE;AAAO,UAAK,KAAZ;AAAkB,UAAK,QAAvB;AAAgC;AAAhC,IAFF,EAGE;AAAO,UAAK,SAAZ;AAAsB,UAAK,YAA3B;AAAwC;AAAxC,IAHF,CADF;AAOD;;AAED,SAASC,MAAT,CAAgBC,OAAO,GAAvB,EAA4BC,IAA5B,EAAkC;AAChC,SAAO,IAAIC,OAAJ,CAAYC,WAAW;AAC5B,UAAMC,eAAe,0BAArB;;AAEA,yBAAOC,GAAP,CAAWR,WAAX,EAAwBG,IAAxB,EAA8B,CAACM,OAAD,EAAUC,KAAV,KAAoB;AAChD,YAAMC,uBAAeP,IAAf,EAAwBM,KAAxB;AAA+BH,oBAA/B;AAA6CN,cAAM;AAAnD,QAAN;;AACAK,cAAQ,gBAAeM,cAAf,CAA8B,6BAAC,OAAD,EAAaD,OAAb,CAA9B,CAAR;AACD,KAHD;AAID,GAPM,CAAP;AAQD;;AAED,SAASE,MAAT,CAAgBT,IAAhB,EAAsBU,EAAtB,EAA0B;AACxB,SAAO,IAAIT,OAAJ,CAAYC,WAAW;AAC5B,UAAMC,eAAe,0BAArB;;AACA,UAAMN,OAAO,aAAIK,OAAJ,CAAYS,OAAOC,QAAP,CAAgBC,QAA5B,EAAsCb,KAAKH,IAA3C,CAAb;;AAEA,yBAAOO,GAAP,CAAWR,UAAUC,IAAV,CAAX,EAA4B,qBAAOiB,eAAnC,EAAoD,CAACT,OAAD,EAAUC,KAAV,KAAoB;AACtE,YAAMC,uBAAeP,IAAf,EAAwBM,KAAxB;AAA+BH,oBAA/B;AAA6CN;AAA7C,QAAN;;AACAK,cAAQ,kBAASa,MAAT,CAAgB,6BAAC,OAAD,EAAaR,OAAb,CAAhB,EAA0CG,EAA1C,CAAR;AACD,KAHD;AAID,GARM,CAAP;AASD;;eAEcZ,M","file":"entry.js","sourcesContent":["import url from \"url\";\n\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport ReactDOMServer from \"react-dom/server\";\nimport Router, { Route } from \"@marionebl/react-router\";\nimport { EventEmitter } from \"events\";\n\nimport Application from \"./components\";\nimport Content from \"./components/content\";\nimport Documentation from \"./containers/documentation\";\n\nfunction getRoutes(base = \"/\") {\n  return (\n    <Route name=\"root\" path={base} handler={Application}>\n      <DefaultRoute handler={Documentation} />\n      <Route name=\"doc\" path=\"/doc/*\" handler={Documentation} />\n      <Route name=\"pattern\" path=\"/pattern/*\" handler={Content} />\n    </Route>\n  );\n}\n\nfunction router(path = \"/\", data) {\n  return new Promise(resolve => {\n    const eventEmitter = new EventEmitter();\n\n    Router.run(getRoutes(), path, (Handler, state) => {\n      const appData = { ...data, ...state, eventEmitter, base: \"/\" };\n      resolve(ReactDOMServer.renderToString(<Handler {...appData} />));\n    });\n  });\n}\n\nfunction client(data, el) {\n  return new Promise(resolve => {\n    const eventEmitter = new EventEmitter();\n    const base = url.resolve(global.location.pathname, data.base);\n\n    Router.run(getRoutes(base), Router.HistoryLocation, (Handler, state) => {\n      const appData = { ...data, ...state, eventEmitter, base };\n      resolve(ReactDOM.render(<Handler {...appData} />, el));\n    });\n  });\n}\n\nexport default router;\nexport { client };\n"]}