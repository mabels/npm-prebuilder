{"version":3,"sources":["../../../src/app/containers/component-demo-widget.js"],"names":["mapState","selectGet","pool","id","filter","p","contentType","find","pattern","selectSrc","state","base","get","item","prefix","charAt","length","slice","src","reload","isStatic"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;eAEe,yBAAQA,QAAR,yB;;;AAEf,MAAMC,YAAY,0CAEhBC,QAAQC,MAAMD,KAAKE,MAAL,CAAYC,KAAKA,EAAEC,WAAF,KAAkB,SAAnC,EAA8CC,IAA9C,CAAmDC,WAAWA,QAAQL,EAAR,KAAeA,EAA7E,CAFE,CAAlB;AAKA,MAAMM,YAAY,8BAChBR,SADgB,EAEhBS,SAASA,MAAMC,IAFC,EAGhB,CAACC,GAAD,EAAMD,IAAN,KAAe;AACb,SAAOR,MAAM;AACX,UAAMU,OAAOD,IAAIT,EAAJ,CAAb;;AACA,QAAI,CAACU,IAAL,EAAW;AACT,aAAO,IAAP;AACD;;AACD,QAAIA,KAAKP,WAAL,KAAqB,SAAzB,EAAoC;AAClC,aAAO,IAAP;AACD;;AACD,WAAQ,GAAEQ,OAAOH,IAAP,CAAa,aAAYE,KAAKV,EAAG,OAA3C;AACD,GATD;AAUD,CAde,CAAlB;;AAiBA,SAASW,MAAT,CAAgBH,IAAhB,EAAsB;AACpB,SAAOA,KAAKI,MAAL,CAAYJ,KAAKK,MAAL,GAAc,CAA1B,MAAiC,GAAjC,GACHL,KAAKM,KAAL,CAAW,CAAX,EAAcN,KAAKK,MAAL,GAAc,CAA5B,CADG,GAEHL,IAFJ;AAGD;;AAED,SAASX,QAAT,CAAkBU,KAAlB,EAAyB;AACvB,SAAO;AACLE,SAAKX,UAAUS,KAAV,CADA;AAELQ,SAAKT,UAAUC,KAAV,CAFA;AAGLS,YAAQT,MAAMU,QAAN,GAAiB,IAAjB,GAAwB;AAH3B,GAAP;AAKD","file":"component-demo-widget.js","sourcesContent":["import { ComponentDemo } from \"@patternplate/widgets\";\nimport { connect } from \"react-redux\";\nimport { createSelector } from \"reselect\";\nimport { flat as selectPool } from \"../selectors/pool\";\n\nexport default connect(mapState)(ComponentDemo);\n\nconst selectGet = createSelector(\n  selectPool,\n  pool => id => pool.filter(p => p.contentType === \"pattern\").find(pattern => pattern.id === id)\n);\n\nconst selectSrc = createSelector(\n  selectGet,\n  state => state.base,\n  (get, base) => {\n    return id => {\n      const item = get(id);\n      if (!item) {\n        return null;\n      }\n      if (item.contentType !== \"pattern\") {\n        return null;\n      }\n      return `${prefix(base)}/api/demo/${item.id}.html`;\n    };\n  }\n);\n\nfunction prefix(base) {\n  return base.charAt(base.length - 1) === \"/\"\n    ? base.slice(0, base.length - 1)\n    : base;\n}\n\nfunction mapState(state) {\n  return {\n    get: selectGet(state),\n    src: selectSrc(state),\n    reload: state.isStatic ? null : true\n  };\n}\n"]}