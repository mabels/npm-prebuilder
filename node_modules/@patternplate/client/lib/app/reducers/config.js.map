{"version":3,"sources":["../../../src/app/reducers/config.js"],"names":["state","action","copy","type","payload","config","hasOwnProperty","ui","renderedLogo","render","sanitize","purge","parse","logo","favicon","renderedFavicon","global","document","png","Promise","resolve"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;eAEe,CAACA,KAAD,EAAQC,MAAR,KAAmB;AAChC,MAAIC,IAAJ;;AAEA,UAAQD,OAAOE,IAAf;AACE,SAAK,qBAAL;AAA4B;AAC1BD,eAAO,mBAAM,EAAN,EAAUD,OAAOG,OAAP,CAAeC,MAAzB,CAAP;AACA;AACD;;AACD;AAAS;AACPH,eAAO,mBAAM,EAAN,EAAUF,KAAV,CAAP;AACD;AAPH;;AAUA,MAAI,CAACE,KAAKI,cAAL,CAAoB,IAApB,CAAL,EAAgC;AAC9BJ,SAAKK,EAAL,GAAU,EAAV;AACD;;AAf+B,gBAiBnBL,IAjBmB;AAAA,QAiBzBK,EAjByB,SAiBzBA,EAjByB;AAmBhCA,KAAGC,YAAH,GAAkBD,GAAGD,cAAH,CAAkB,MAAlB,IACd,4BAAe,gBAAIG,MAAJ,CAAW,gBAAIC,QAAJ,CAAa,gBAAIC,KAAJ,CAAU,CAAC,gBAAIC,KAAJ,CAAUL,GAAGM,IAAb,CAAD,CAAV,CAAb,EAA8C,CAA9C,CAAX,CAAf,CADc,GAEd,EAFJ;AAIA,QAAMC,UAAUP,GAAGO,OAAH,IAAcP,GAAGM,IAAjC;AAEAN,KAAGQ,eAAH,GAAqBC,OAAOC,QAAP,IAAmBH,OAAnB,GACjB,gBAAII,GAAJ,CAAQJ,OAAR,CADiB,GAEjBK,QAAQC,OAAR,CAAgB,EAAhB,CAFJ;AAIA,SAAOlB,IAAP;AACD,C","file":"config.js","sourcesContent":["import {renderToString} from \"react-dom/server\";\nimport {merge} from \"lodash\";\nimport {svg} from \"@patternplate/components\";\n\nexport default (state, action) => {\n  let copy;\n\n  switch (action.type) {\n    case \"LOAD_SCHEMA_SUCCESS\": {\n      copy = merge({}, action.payload.config);\n      break;\n    }\n    default: {\n      copy = merge({}, state);\n    }\n  }\n\n  if (!copy.hasOwnProperty(\"ui\")) {\n    copy.ui = {};\n  }\n\n  const {ui} = copy;\n\n  ui.renderedLogo = ui.hasOwnProperty(\"logo\")\n    ? renderToString(svg.render(svg.sanitize(svg.purge([svg.parse(ui.logo)]))[0]))\n    : \"\";\n\n  const favicon = ui.favicon || ui.logo;\n\n  ui.renderedFavicon = global.document && favicon\n    ? svg.png(favicon)\n    : Promise.resolve(\"\");\n\n  return copy;\n};\n"]}