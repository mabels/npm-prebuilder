"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _server = require("react-dom/server");

var _lodash = require("lodash");

var _components = require("@patternplate/components");

var _default = (state, action) => {
  let copy;

  switch (action.type) {
    case "LOAD_SCHEMA_SUCCESS":
      {
        copy = (0, _lodash.merge)({}, action.payload.config);
        break;
      }

    default:
      {
        copy = (0, _lodash.merge)({}, state);
      }
  }

  if (!copy.hasOwnProperty("ui")) {
    copy.ui = {};
  }

  const _copy = copy,
        ui = _copy.ui;
  ui.renderedLogo = ui.hasOwnProperty("logo") ? (0, _server.renderToString)(_components.svg.render(_components.svg.sanitize(_components.svg.purge([_components.svg.parse(ui.logo)]))[0])) : "";
  const favicon = ui.favicon || ui.logo;
  ui.renderedFavicon = global.document && favicon ? _components.svg.png(favicon) : Promise.resolve("");
  return copy;
};

exports.default = _default;
//# sourceMappingURL=config.js.map