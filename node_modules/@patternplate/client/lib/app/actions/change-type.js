"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.type = exports.default = void 0;

var _assert = _interopRequireDefault(require("assert"));

var _lodash = require("lodash");

var _urlQuery = _interopRequireDefault(require("../utils/url-query"));

var _ = require("./");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _default = changeType;
exports.default = _default;
const type = "CHANGE_TYPE";
exports.type = type;

function changeType(input) {
  _assert.default.equal(typeof input, "string", "input for changeType action must be of type string");

  return (dispatch, getState) => {
    const location = getState().routing.locationBeforeTransitions;

    const parsed = _urlQuery.default.parse(location.query.source || "");

    const type = (0, _lodash.includes)(["source", "transformed"], input) ? input : "source";
    const query = {
      type
    };

    const source = _urlQuery.default.format((0, _lodash.merge)({}, parsed, {
      query
    }));

    dispatch((0, _.patchLocation)({
      query: {
        source
      }
    }));
  };
}

changeType.type = type;
//# sourceMappingURL=change-type.js.map