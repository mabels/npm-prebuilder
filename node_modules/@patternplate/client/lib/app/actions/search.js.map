{"version":3,"sources":["../../../src/app/actions/search.js"],"names":["search","type","payload","dispatch","getState","state","value","persist","query","searchPreview","perform"],"mappings":";;;;;;;AAAA;;AACA;;;;eAEeA,M;;AACR,MAAMC,OAAO,QAAb;;;AAEP,SAASD,MAAT,CAAgBE,OAAhB,EAAyB;AACvB,SAAO,CAACC,QAAD,EAAWC,QAAX,KAAwB;AAC7B,UAAMC,QAAQD,UAAd;AAEAD,aAAS;AACPF,YAAM,YADC;AAEPC,eAASA,QAAQI;AAFV,KAAT;AAKA,sBAAI,MAAM;AACR,UAAIJ,QAAQK,OAAZ,EAAqB;AACnBJ,iBACE,qBAAc;AACZK,iBAAO;AACLR,oBAAQE,QAAQI,KADX;AAEL,8BACED,MAAML,MAAN,KAAiBE,QAAQI,KAAzB,GAAiCD,MAAMI,aAAvC,GAAuD;AAHpD;AADK,SAAd,CADF;AASD,OAVD,MAUO,IAAIP,QAAQQ,OAAZ,EAAqB;AAC1BP,iBAAS;AACPF,gBAAM,gBADC;AAEPC,mBAASA,QAAQI;AAFV,SAAT;AAID;AACF,KAjBD;AAkBD,GA1BD;AA2BD;;AAEDN,OAAOC,IAAP,GAAcA,IAAd","file":"search.js","sourcesContent":["import raf from \"raf\";\nimport { patchLocation } from \"./\";\n\nexport default search;\nexport const type = \"SEARCH\";\n\nfunction search(payload) {\n  return (dispatch, getState) => {\n    const state = getState();\n\n    dispatch({\n      type: \"SET_SEARCH\",\n      payload: payload.value\n    });\n\n    raf(() => {\n      if (payload.persist) {\n        dispatch(\n          patchLocation({\n            query: {\n              search: payload.value,\n              \"search-preview\":\n                state.search === payload.value ? state.searchPreview : 0\n            }\n          })\n        );\n      } else if (payload.perform) {\n        dispatch({\n          type: \"PERFORM_SEARCH\",\n          payload: payload.value\n        });\n      }\n    });\n  };\n}\n\nsearch.type = type;\n"]}