{"version":3,"sources":["../../../src/app/actions/change-type.js"],"names":["changeType","type","input","equal","dispatch","getState","location","routing","locationBeforeTransitions","parsed","parse","query","source","format"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;;;eAEeA,U;;AACR,MAAMC,OAAO,aAAb;;;AAEP,SAASD,UAAT,CAAoBE,KAApB,EAA2B;AACzB,kBAAOC,KAAP,CACE,OAAOD,KADT,EAEE,QAFF,EAGE,oDAHF;;AAMA,SAAO,CAACE,QAAD,EAAWC,QAAX,KAAwB;AAC7B,UAAMC,WAAWD,WAAWE,OAAX,CAAmBC,yBAApC;;AACA,UAAMC,SAAS,kBAASC,KAAT,CAAeJ,SAASK,KAAT,CAAeC,MAAf,IAAyB,EAAxC,CAAf;;AACA,UAAMX,OAAO,sBAAS,CAAC,QAAD,EAAW,aAAX,CAAT,EAAoCC,KAApC,IAA6CA,KAA7C,GAAqD,QAAlE;AACA,UAAMS,QAAQ;AAAEV;AAAF,KAAd;;AACA,UAAMW,SAAS,kBAASC,MAAT,CAAgB,mBAAM,EAAN,EAAUJ,MAAV,EAAkB;AAAEE;AAAF,KAAlB,CAAhB,CAAf;;AACAP,aAAS,qBAAc;AAAEO,aAAO;AAAEC;AAAF;AAAT,KAAd,CAAT;AACD,GAPD;AAQD;;AAEDZ,WAAWC,IAAX,GAAkBA,IAAlB","file":"change-type.js","sourcesContent":["import assert from \"assert\";\nimport { includes, merge } from \"lodash\";\nimport urlQuery from \"../utils/url-query\";\nimport { patchLocation } from \"./\";\n\nexport default changeType;\nexport const type = \"CHANGE_TYPE\";\n\nfunction changeType(input) {\n  assert.equal(\n    typeof input,\n    \"string\",\n    \"input for changeType action must be of type string\"\n  );\n\n  return (dispatch, getState) => {\n    const location = getState().routing.locationBeforeTransitions;\n    const parsed = urlQuery.parse(location.query.source || \"\");\n    const type = includes([\"source\", \"transformed\"], input) ? input : \"source\";\n    const query = { type };\n    const source = urlQuery.format(merge({}, parsed, { query }));\n    dispatch(patchLocation({ query: { source } }));\n  };\n}\n\nchangeType.type = type;\n"]}