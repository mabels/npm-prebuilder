{"version":3,"sources":["../../../src/app/actions/patch-location.js"],"names":["patchLocation","type","payload","dispatch","getState","state","location","routing","locationBeforeTransitions","hasOwnProperty","pathname","indexOf","base","prefix","charAt","length","slice"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;eAEeA,a;;AACR,MAAMC,OAAO,gBAAb;;;AAEP,SAASD,aAAT,CAAuBE,OAAvB,EAAgC;AAC9B,SAAO,CAACC,QAAD,EAAWC,QAAX,KAAwB;AAC7B,UAAMC,QAAQD,UAAd;AACA,UAAME,WAAWD,MAAME,OAAN,CAAcC,yBAA/B;;AAEA,QAAIN,QAAQO,cAAR,CAAuB,UAAvB,CAAJ,EAAwC;AACtCP,cAAQQ,QAAR,GAAmBR,QAAQQ,QAAR,CAAiBC,OAAjB,CAAyBN,MAAMO,IAA/B,MAAyC,CAAzC,GACfV,QAAQQ,QADO,GAEd,GAAEG,OAAOR,MAAMO,IAAb,CAAmB,IAAGV,QAAQQ,QAAS,EAF9C;AAGD;;AAEDP,aAAS,4BAAK,mBAAM,EAAN,EAAUG,QAAV,EAAoBJ,OAApB,CAAL,CAAT;AACD,GAXD;AAYD;;AAEDF,cAAcC,IAAd,GAAqBA,IAArB;;AAEA,SAASY,MAAT,CAAgBD,IAAhB,EAAsB;AACpB,SAAOA,KAAKE,MAAL,CAAYF,KAAKG,MAAL,GAAc,CAA1B,MAAiC,GAAjC,GACHH,KAAKI,KAAL,CAAW,CAAX,EAAcJ,KAAKG,MAAL,GAAc,CAA5B,CADG,GAEHH,IAFJ;AAGD","file":"patch-location.js","sourcesContent":["import { merge } from \"lodash\";\nimport { push } from \"react-router-redux\";\nimport url from \"url\";\n\nexport default patchLocation;\nexport const type = \"PATCH_LOCATION\";\n\nfunction patchLocation(payload) {\n  return (dispatch, getState) => {\n    const state = getState();\n    const location = state.routing.locationBeforeTransitions;\n\n    if (payload.hasOwnProperty(\"pathname\")) {\n      payload.pathname = payload.pathname.indexOf(state.base) === 0\n        ? payload.pathname\n        : `${prefix(state.base)}/${payload.pathname}`;\n    }\n\n    dispatch(push(merge({}, location, payload)));\n  };\n}\n\npatchLocation.type = type;\n\nfunction prefix(base) {\n  return base.charAt(base.length - 1) === \"/\"\n    ? base.slice(0, base.length - 1)\n    : base;\n}\n"]}