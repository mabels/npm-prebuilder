{"version":3,"sources":["../src/main.js"],"names":["path","require","loadDocsTree","loadMeta","module","exports","options","main","req","res","err","json","config","cwd","entry","Promise","all","docs","readme","patterns","send","meta","id","children"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAMA,OAAOC,QAAQ,MAAR,CAAb;;iBACyBA,QAAQ,yBAAR,C;MAAjBC,Y,YAAAA,Y;;AACR,MAAMC,WAAWF,QAAQ,yBAAR,CAAjB;;AAEAG,OAAOC,OAAP,GAAuBC,OAAN;AACf,iBAAO,SAAeC,IAAf,CAAoBC,GAApB,EAAyBC,GAAzB;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA,mCAsBIC,GAtBJ,EAsBS;AACZ,uBAAOD,IAAIE,IAAJ,CAASD,GAAT,CAAP;AACD,OAxBI;;AACL,UAAI;AACME,cADN,GACsBN,OADtB,CACMM,MADN,EACcC,GADd,GACsBP,OADtB,CACcO,GADd;AAAA,gCAEqBP,QAAQM,MAF7B,CAEME,KAFN,EAEMA,KAFN,sCAEc,EAFd;AAIyB,eAAMC,QAAQC,GAAR,CAAY,CAC3Cd,aAAa;AACXW,aADW;AAEXI,gBAAML,OAAOK,IAFF;AAGXC,kBAAQN,OAAOM;AAHJ,SAAb,CAD2C,EAM3Cf,SAAS;AACPU,aADO;AAEPC;AAFO,SAAT,CAN2C,CAAZ,CAAN;AAAA,4DAApBG,IAAoB,aAAbE,QAAa,YAAbA,QAAa;AAY3BV,cAAIW,IAAJ,CAAS;AACPR,kBADO;AAEPK,gBAFO;AAGPI,kBAAM;AAACC,kBAAI,MAAL;AAAaC,wBAAUJ;AAAvB;AAHC,WAAT;AAZ2B;AAAA;AAiB5B,OArBD,CAqBE,OAAOT,GAAP,EAAY;AAAA,qBAALA,GAAK;AAEb;AAxBI;AAAA,GAAP;AADe,mBAAjB","file":"main.js","sourcesContent":["const path = require(\"path\");\nconst { loadDocsTree } = require(\"@patternplate/load-docs\");\nconst loadMeta = require(\"@patternplate/load-meta\");\n\nmodule.exports = async options => {\n  return async function main(req, res) {\n    try {\n      const { config, cwd } = options;\n      const { entry = [] } = options.config;\n\n      const [docs, {patterns}] = await Promise.all([\n        loadDocsTree({\n          cwd,\n          docs: config.docs,\n          readme: config.readme\n        }),\n        loadMeta({\n          cwd,\n          entry\n        })\n      ]);\n\n      res.send({\n        config,\n        docs,\n        meta: {id: \"root\", children: patterns}\n      });\n    } catch (err) {\n      return res.json(err);\n    }\n  };\n};\n"]}